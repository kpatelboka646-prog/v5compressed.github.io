(function(){'use strict';const performanceStart=performance.now();const criticalResources=['images/logo.png','images/logo2.png','images/home-icon.png','images/notification-icon.png'];const instantPreload=()=>{const fragment=document.createDocumentFragment();criticalResources.forEach(src=>{const link=document.createElement('link');link.rel='prefetch';link.href=src;fragment.appendChild(link);});document.head.appendChild(fragment);};instantPreload();const initialize=()=>{document.body.classList.remove('loading');document.body.classList.add('loaded');const elements={notificationBtn:document.getElementById('notification-btn'),notificationPopup:document.getElementById('notification-popup'),closePopupBtn:document.getElementById('close-popup'),overlay:document.getElementById('overlay'),guestBtn:document.getElementById('guest-btn'),featureCards:document.querySelectorAll('.feature-card'),header:document.querySelector('.header'),navButtons:document.querySelector('.nav-buttons')};preloadAllImages();setupNotifications(elements);setupGuestButton(elements.guestBtn);setupAnimations(elements.featureCards);optimizeLayout(elements.header,elements.navButtons);const loadTime=performance.now()-performanceStart;console.log(`ðŸš€ Website loaded in ${loadTime.toFixed(2)}ms-Lightning Speed!`);};const preloadAllImages=()=>{const allImages=['images/logo.png','images/logo2.png','images/home-icon.png','images/explore-icon.png','images/listen-icon.png','images/discover-icon.png','images/innovate-icon.png','images/notification-icon.png','images/account-icon.png','images/ebooks-icon.png','images/audiobooks-icon.png','images/courses-icon.png','images/tools-icon.png'];requestAnimationFrame(()=>{const imagePromises=allImages.map(src=>{return new Promise((resolve)=>{const img=new Image();img.onload=()=>resolve();img.onerror=()=>resolve();img.src=src;});});Promise.all(imagePromises).then(()=>{console.log('âš¡ All images preloaded at light speed');});});};const setupNotifications=(elements)=>{const{notificationBtn,notificationPopup,closePopupBtn,overlay}=elements;if(!notificationBtn||!notificationPopup||!closePopupBtn||!overlay)return;let isOpen=false;const showPopup=(e)=>{e.stopPropagation();if(isOpen)return;isOpen=true;requestAnimationFrame(()=>{overlay.style.display='block';notificationPopup.style.display='block';notificationPopup.style.transform='translate(-50%, -50%) scale(0.8)';notificationPopup.style.opacity='0';requestAnimationFrame(()=>{notificationPopup.style.transition='all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1)';notificationPopup.style.transform='translate(-50%, -50%) scale(1)';notificationPopup.style.opacity='1';});});document.body.style.overflow='hidden';};const closePopup=()=>{if(!isOpen)return;isOpen=false;notificationPopup.style.transition='all 0.2s ease-out';notificationPopup.style.transform='translate(-50%, -50%) scale(0.9)';notificationPopup.style.opacity='0';setTimeout(()=>{notificationPopup.style.display='none';overlay.style.display='none';document.body.style.overflow='';},200);};notificationBtn.addEventListener('click',showPopup,{passive:false});closePopupBtn.addEventListener('click',closePopup,{passive:true});overlay.addEventListener('click',closePopup,{passive:true});document.addEventListener('keydown',(e)=>{if(e.key==='Escape'&&isOpen){closePopup();}},{passive:true});};const setupGuestButton=(guestBtn)=>{if(!guestBtn)return;guestBtn.addEventListener('click',(e)=>{e.preventDefault();const toast=document.createElement('div');toast.textContent='Guest accounts cannot be modified. Please sign up for full access.';toast.style.cssText=`position:fixed;top:20px;left:50%;transform:translateX(-50%);background:linear-gradient(135deg,#2a2c2c,#1f2121);color:white;padding:1rem 1.5rem;border-radius:0.8rem;z-index:3000;font-size:0.9rem;box-shadow:0 10px 25px rgba(0,0,0,0.3);border:1px solid rgba(255,255,255,0.1);text-align:center;max-width:90vw;backdrop-filter:blur(10px);opacity:0;transform:translateX(-50%)translateY(-20px);transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);`;document.body.appendChild(toast);requestAnimationFrame(()=>{toast.style.opacity='1';toast.style.transform='translateX(-50%) translateY(0)';});setTimeout(()=>{toast.style.opacity='0';toast.style.transform='translateX(-50%) translateY(-20px)';setTimeout(()=>{if(toast.parentNode){toast.parentNode.removeChild(toast);}},400);},3000);},{passive:false});};const setupAnimations=(featureCards)=>{featureCards.forEach((card,index)=>{card.style.willChange='transform';card.style.backfaceVisibility='hidden';let isHovered=false;const handleMouseEnter=()=>{if(isHovered)return;isHovered=true;card.style.transform='translateY(-10px) translateZ(0)';};const handleMouseLeave=()=>{if(!isHovered)return;isHovered=false;card.style.transform='translateY(0) translateZ(0)';};card.addEventListener('mouseenter',handleMouseEnter,{passive:true});card.addEventListener('mouseleave',handleMouseLeave,{passive:true});card.style.animationDelay=`${0.1*index}s`;});};const optimizeLayout=(header,navButtons)=>{if(!header||!navButtons)return;const optimizeHeaderLayout=()=>{const headerHeight=header.offsetHeight;const navButtonsHeight=navButtons.scrollHeight;const logoHeight=document.querySelector('.logo-container')?.offsetHeight||0;if(navButtonsHeight>(headerHeight-logoHeight-100)){navButtons.style.gap='0.8rem';}};optimizeHeaderLayout();let resizeTimeout;window.addEventListener('resize',()=>{clearTimeout(resizeTimeout);resizeTimeout=setTimeout(optimizeHeaderLayout,100);},{passive:true});};const setupLazyLoading=()=>{if('IntersectionObserver'in window){const imageObserver=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const img=entry.target;if(img.dataset.src){img.src=img.dataset.src;img.classList.remove('lazy');imageObserver.unobserve(img);}}});},{rootMargin:'50px 0px',threshold:0.01});document.querySelectorAll('img[data-src]').forEach(img=>{imageObserver.observe(img);});}};const optimizeForConnection=()=>{if('connection'in navigator){const connection=navigator.connection;if(connection.effectiveType==='slow-2g'||connection.effectiveType==='2g'){document.documentElement.style.setProperty('--animation-duration','0.1s');}}};if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initialize,{once:true,passive:true});}else{initialize();}
setupLazyLoading();optimizeForConnection();if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('/sw.js').catch(()=>{});});}})();